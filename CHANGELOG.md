# Changelog

## [2024-01-XX] - GitLeaks Security Fix

### Security
- **КРИТИЧЕСКОЕ ИСПРАВЛЕНИЕ**: Исправлена конфигурация GitLeaks для предотвращения утечек токенов
- Удалены файлы с реальными токенами из git tracking (`test_bot.sh`, `run_with_real_token.sh`)
- Созданы примеры файлов с placeholder'ами (`test_bot.sh.example`, `run_with_real_token.sh.example`)
- Исправлен regex для Telegram токенов (убрано требование `bot` в начале)
- Добавлен baseline для известных токенов в git истории
- Обновлен pre-commit hook для использования baseline

### Fixed
- GitLeaks теперь правильно обнаруживает Telegram и OpenRouter токены
- Локальные файлы `.env` исключены из проверки GitLeaks
- Pre-commit hook больше не блокирует коммиты из-за известных токенов в истории

### Documentation
- Создана документация по исправлению GitLeaks (`docs/GITLEAKS_FIX.md`)
- Добавлены рекомендации по безопасной работе с токенами
- Описаны команды для проверки и обновления baseline

## [2024-01-XX] - DX Tool Improvements

### Added
- ComplexityAnalyzer для автоматического анализа сложности конструкторов
- Поддержка безопасных test-only маркеров в C# коде
- Автоматическое определение стратегии мокирования
- Генерация кастомных конструкторов для сложной инициализации
- Дополнительные методы в TestFactory для гибкости
- Поддержка TelegramBotClient как утилиты
- Улучшенная логика оценки сложности с учетом интерфейсов

### Changed
- Улучшен парсинг C# файлов для корректного поиска классов и конструкторов
- Обновлена логика сложности: интерфейсы теперь учитываются в оценке
- Расширен список поддерживаемых утилит (TelegramBotClient)
- Улучшена генерация TestFactory с учетом анализа сложности

### Fixed
- Исправлен парсинг сложных конструкторов с множественными параметрами
- Исправлено определение путей к папкам Services и Handlers
- Исправлена обработка relative imports в Python модулях
- Исправлено использование FakeTelegramClient для TelegramBotClient

### Technical
- Создан ComplexityAnalyzer с поддержкой уровней сложности (LOW/MEDIUM/HIGH)
- Добавлены безопасные C# маркеры с условной компиляцией (#if TESTING)
- Реализована интеграция анализа сложности в процесс генерации
- Добавлены тестовые скрипты для валидации функциональности

### Documentation
- Обновлен README для DX Tool с профессиональной документацией
- Добавлены примеры использования и конфигурации
- Создана документация по архитектуре и компонентам
- Добавлены результаты тестирования и метрики покрытия

### Testing
- Создан test_multiple_classes.py для тестирования на разных типах классов
- Добавлены debug скрипты для отладки парсинга и поиска файлов
- Реализована валидация генерации TestFactory
- Протестирована работа на 5 различных классах с разной сложностью

### Results
- Покрытие FakeTelegramClient: 80% (4/5 классов)
- Покрытие моков конкретных классов: 40% (2/5 классов)
- Покрытие кастомных конструкторов: 40% (2/5 классов)
- Покрытие дополнительных методов: 40% (2/5 классов)
- 100% покрытие для сложных классов (HIGH сложность) 