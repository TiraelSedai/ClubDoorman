---
name: General-TestKit-Rules
version: "1.0"
globs:
  - "**/*Test.cs"
  - "**/TestKit/**/*.cs"
  - "**/TestInfrastructure/**/*.cs"
alwaysApply: false
---

# –û–±—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è Cursor –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ç–µ—Å—Ç–∞–º–∏

## üß≠ –ò—Ç–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥
- –ù–∞—á–∏–Ω–∞–π —Å —Å–∞–º–æ–≥–æ –ø—Ä–æ—Å—Ç–æ–≥–æ —Ç–µ—Å—Ç–∞ (–æ–±—ã—á–Ω–æ happy path).
- –°–Ω–∞—á–∞–ª–∞ –ø–∏—à–µ–º inline Arrange (POC).
- –ö–∞–∫ —Ç–æ–ª—å–∫–æ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è —Å—Ü–µ–Ω–∞—Ä–∏–π (–∏–ª–∏ Act –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π, –∏–ª–∏ Arrange –∫–æ–ø–∏–ø–∞—Å—Ç–∏—Ç—Å—è) ‚Äî **–≤—ã–Ω–æ—Å–∏–º –≤ TestKit**.
- –ö–∞–∂–¥—ã–π –ø–æ—Å–ª–µ–¥—É—é—â–∏–π —Ç–µ—Å—Ç ‚Äî **—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ**, –Ω–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–∏—Ä.

## üß∞ –†–∞–±–æ—Ç–∞ —Å TestKit
- **–ò—Å–ø–æ–ª—å–∑—É–π TestKit (`TK.`) –ø—Ä–∏ –ª—é–±–æ–π –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏.**
- –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π –≥–æ—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ `TK.Specialized.*Scenario()` ‚Äî –æ–Ω–∏ –æ—Ç—Ä–∞–∂–∞—é—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –∞ –Ω–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É.
- –î–æ–±–∞–≤–ª—è–π –Ω–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏:
  - –°—Ü–µ–Ω–∞—Ä–∏–π —è–≤–Ω–æ **—Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è**;
  - –û–Ω **–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ >=2 —Ç–µ—Å—Ç–∞—Ö**;
  - –û–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ—Ç—Ä–∏–≤–∏–∞–ª—å–Ω—ã–µ –º–æ–∫–∏/—Ñ–ª–∞–≥–∏/–ø–∞—Ä–∞–º–µ—Ç—Ä—ã;
  - –£ –Ω–µ–≥–æ **–ø–æ–Ω—è—Ç–Ω–æ–µ –∏ —á–∏—Ç–∞–µ–º–æ–µ –∏–º—è**, –æ—Ç—Ä–∞–∂–∞—é—â–µ–µ intent.

## üßº –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ TestKit
- –ù–µ –æ–±–æ–±—â–∞–π TestKit "–≤–ø–µ—Ä—ë–¥" ‚Äî —Ä–∞—Å—à–∏—Ä—è–π **–ø–æ —Ñ–∞–∫—Ç—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**.
- –°—Ü–µ–Ω–∞—Ä–∏–∏ –≤ TestKit ‚Äî —ç—Ç–æ –Ω–µ —Ñ–∞–±—Ä–∏–∫–∏, –∞ **–ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏**.
- –ï—Å–ª–∏ TestKit —Ä–∞–∑—Ä–æ—Å—Å—è:
  - –≥—Ä—É–ø–ø–∏—Ä—É–π —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É (BanTests, AiCheckTests –∏ —Ç.–¥.);
  - –≤—ã–¥–µ–ª—è–π –ø–æ–¥–ø–∞–ø–∫–∏, –Ω–µ —Å–æ–∑–¥–∞–≤–∞–π —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö –±–∏–ª–¥–µ—Ä–æ–≤ –±–µ–∑ –Ω—É–∂–¥—ã;
  - –≤—Å—ë, —á—Ç–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ‚Äî —É–±–∏—Ä–∞–π –∏–ª–∏ –∞—Ä—Ö–∏–≤–∏—Ä—É–π.

## üß™ –í–∏–¥—ã —Ç–µ—Å—Ç–æ–≤
- `POC` ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π test-case —Å inline –¥–∞–Ω–Ω—ã–º–∏.
- `Production` ‚Äî —É—Å—Ç–æ–π—á–∏–≤—ã–π —Ç–µ—Å—Ç —Å –≤—ã–Ω–æ—Å–æ–º –≤ TestKit.
- `Extrapolated` ‚Äî —Ç–µ—Å—Ç, —Ä–∞—Å—à–∏—Ä—è—é—â–∏–π —É–∂–µ –ø–æ–∫—Ä—ã—Ç—É—é –ª–æ–≥–∏–∫—É –Ω–∞ —Å—Ö–æ–∂–∏–π –º–µ—Ç–æ–¥.
- –í—Å–µ–≥–¥–∞ –º–∞—Ä–∫–∏—Ä—É–π `[Category(...)]` –∏ `/// <tags>`.

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–∞
1. **Arrange**: –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–∑ TestKit
2. **Act**: –æ–¥–∏–Ω –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤
3. **Assert**: –≤—Å–µ –≤–Ω–µ—à–Ω–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (`Moq.Verify`, `Assert`, `Logs`, `Calls`)
4. **–ò–º—è —Ç–µ—Å—Ç–∞**: `Method_Condition_ExpectedResult`

## üß† Cursor, –∑–∞–ø–æ–º–Ω–∏
- **–ù–µ —Å–æ–∑–¥–∞–≤–∞–π —Ç–µ—Å—Ç—ã –±–µ–∑ Arrange**.
- **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–π `Assert.True(true)` –∏–ª–∏ `TODO`** ‚Äî —Ç–∞–∫–∏–µ —Ç–µ—Å—Ç—ã –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è.
- –ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤ **–ø—Ä–µ–¥–ª–æ–∂–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TestKit**, –µ—Å–ª–∏ –ø–æ—Ö–æ–∂–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —É–∂–µ –µ—Å—Ç—å.
- –ü—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ ‚Äî **–ø—Ä–µ–¥–ª–∞–≥–∞–π –≤—ã–Ω–æ—Å Arrange –≤ TestKit**, –µ—Å–ª–∏ –æ–Ω –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è.

