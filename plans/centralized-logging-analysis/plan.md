# –ê–Ω–∞–ª–∏–∑ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### ‚úÖ –ß—Ç–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (Notifications)**
   - ‚úÖ `NotificationData` - –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –¥–∞–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
   - ‚úÖ `AdminNotificationType` - —Ç–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –∞–¥–º–∏–Ω—Å–∫–æ–≥–æ —á–∞—Ç–∞
   - ‚úÖ `UserNotificationType` - —Ç–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
   - ‚úÖ `LogNotificationType` - —Ç–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –ª–æ–≥-—á–∞—Ç–∞
   - ‚úÖ –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã –¥–∞–Ω–Ω—ã—Ö: `AutoBanNotificationData`, `SuspiciousUserNotificationData`, `AiProfileAnalysisData`, `ErrorNotificationData`, `ChannelMessageNotificationData`, `SuspiciousMessageNotificationData`, `UserCleanupNotificationData`, `SimpleNotificationData`

2. **MessageService**
   - ‚úÖ `IMessageService` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
   - ‚úÖ `MessageService` - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞
   - ‚úÖ `MessageTemplates` - —à–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
   - ‚úÖ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

3. **UserFlowLogger**
   - ‚úÖ `IUserFlowLogger` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ñ–ª–æ—É
   - ‚úÖ `UserFlowLogger` - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
   - ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `MessageHandler` –∏ –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

### üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:

1. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ç–∏–ø—ã –≤ `AdminNotificationType`: `ChannelMessage`, `RemovedFromApproved`, `AutoBan`, `SuspiciousMessage`, `ChannelError`, `UserCleanup`
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ç–∏–ø—ã –≤ `UserNotificationType`: `Warning`, `Success`
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–π —Ç–∏–ø –≤ `LogNotificationType`: `ChannelMessage`
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –º–µ—Ç–æ–¥—ã –≤ `IUserFlowLogger` –∏ `UserFlowLogger`
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –¥–∞–Ω–Ω—ã—Ö: `ChannelMessageNotificationData`, `SuspiciousMessageNotificationData`, `UserCleanupNotificationData`, `SimpleNotificationData`
   - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ (–¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è enum –∑–Ω–∞—á–µ–Ω–∏—è, –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∫–ª–∞—Å—Å—ã)

2. **–í–Ω–µ–¥—Ä–µ–Ω–∏–µ MessageService –≤ MessageHandler**
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `IMessageService` –≤ `MessageHandler`
   - ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω using –¥–ª—è `ClubDoorman.Models.Notifications`
   - ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã –≤ `BanUserForLongName` –Ω–∞ `MessageService`
   - ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã –≤ `BanBlacklistedUser` –Ω–∞ `MessageService`
   - ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã –≤ `AutoBanChannel` –Ω–∞ `MessageService`
   - ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã –≤ `AutoBan` –Ω–∞ `MessageService`
   - ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã –≤ `DontDeleteButReportMessage` –Ω–∞ `MessageService`
   - ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã –≤ `HandleBlacklistBan` –Ω–∞ `MessageService`
   - ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã –≤ `HandleAdminCommandAsync` –Ω–∞ `MessageService`
   - ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã –≤ `HandleSpamCommandAsync` –∏ `HandleHamCommandAsync` –Ω–∞ `MessageService`
   - ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã —à–∞–±–ª–æ–Ω—ã –¥–ª—è –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
   - üîÑ –¢—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–º–µ–Ω–∞ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –≤ MessageHandler (SendAiProfileAlert)

### ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´:

1. **MessageService –ù–ï –ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø**
   - ‚úÖ –ß–∞—Å—Ç–∏—á–Ω–æ –≤–Ω–µ–¥—Ä–µ–Ω –≤ MessageHandler (12/15+ –º–µ—Ç–æ–¥–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω—ã)
   - ‚ùå –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç MessageService
   - ‚ùå –í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ `_bot.SendMessage`

2. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**
   - ‚ùå –ú–Ω–æ–≥–æ –º–µ—Å—Ç —Å –ø—Ä—è–º—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤–º–µ—Å—Ç–æ UserFlowLogger
   - ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –≤ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö

3. **–ù–µ–ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ UserFlowLogger**
   - ‚ùå –ú–Ω–æ–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç UserFlowLogger
   - ‚ùå –ï—Å—Ç—å –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã `_logger.LogInformation` –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π

## –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. MessageService –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
**–§–∞–π–ª—ã —Å –ø—Ä—è–º—ã–º–∏ –≤—ã–∑–æ–≤–∞–º–∏ `_bot.SendMessage`:**
- `Worker.cs` - 15+ –º–µ—Å—Ç
- `MessageHandler.cs` - 3+ –º–µ—Å—Ç–∞ (—á–∞—Å—Ç–∏—á–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
- `CallbackQueryHandler.cs` - 10+ –º–µ—Å—Ç
- `ModerationService.cs` - 5+ –º–µ—Å—Ç
- `IntroFlowService.cs` - 3+ –º–µ—Å—Ç–∞
- `ChatMemberHandler.cs` - 2+ –º–µ—Å—Ç–∞

### 2. –ü—Ä—è–º–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–º–µ—Å—Ç–æ UserFlowLogger
**–§–∞–π–ª—ã —Å –ø—Ä—è–º—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π:**
- `Worker.cs` - –∞–≤—Ç–æ–±–∞–Ω –ø–æ –±–ª—ç–∫–ª–∏—Å—Ç—É
- `IntroFlowService.cs` - –±–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `ApprovedUsersStorage.cs` - –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- `SuspiciousUsersStorage.cs` - –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- `CaptchaService.cs` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–∞–ø—á–∏
- `ModerationService.cs` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–æ–¥–µ—Ä–∞—Ü–∏–∏
- `CallbackQueryHandler.cs` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–∞–ø—á–∏ –∏ –∞–¥–º–∏–Ω—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è

## –ó–∞–¥–∞—á–∏ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ö—Ä–∏—Ç–∏—á–Ω–æ) - –í –ü–†–û–¶–ï–°–°–ï
- [x] –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ç–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- [x] –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –º–µ—Ç–æ–¥—ã –≤ UserFlowLogger
- [x] –ò–Ω–∂–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å IMessageService –≤ MessageHandler
- [x] –û–±–Ω–æ–≤–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –≤ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- [x] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- [x] –ó–∞–º–µ–Ω–∏—Ç—å –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã –≤ `BanUserForLongName`, `BanBlacklistedUser`, `AutoBanChannel`
- [x] –ó–∞–º–µ–Ω–∏—Ç—å –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã –≤ `AutoBan`, `DontDeleteButReportMessage`, `HandleBlacklistBan`
- [x] –ó–∞–º–µ–Ω–∏—Ç—å –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã –≤ `HandleAdminCommandAsync`, `HandleSpamCommandAsync`, `HandleHamCommandAsync`
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã –≤ MessageHandler (SendAiProfileAlert)
- [ ] –ò–Ω–∂–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å IMessageService –≤ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã –≤ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–í–∞–∂–Ω–æ)
- [ ] –ò–Ω–∂–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å IUserFlowLogger –≤–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å –ø—Ä—è–º–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ UserFlowLogger
- [ ] –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –º–µ—Ç–æ–¥—ã –≤ UserFlowLogger

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–£–ª—É—á—à–µ–Ω–∏—è)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–∏–ø–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ —à–∞–±–ª–æ–Ω–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## –°—Ç–∞—Ç—É—Å: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ - MessageHandler –ø–æ—á—Ç–∏ –∑–∞–≤–µ—Ä—à–µ–Ω (12/15+ –º–µ—Ç–æ–¥–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω—ã) 