# –°—Ç—Ä–∞—Ç–µ–≥–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏: –æ—Ç Legacy –∫ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## üéØ –¶–µ–ª—å: –û–¥–Ω–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ë–ï–ó legacy

### ‚ùå –ß—Ç–æ –ù–ï –ø–ª–∞–Ω–∏—Ä—É–µ–º:
- –û—Å—Ç–∞–≤–ª—è—Ç—å —Å—Ç–∞—Ä—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã callback data –Ω–∞–≤—Å–µ–≥–¥–∞
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –¥—É–±–ª–∏—Ä—É—é—â—É—é –ª–æ–≥–∏–∫—É
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
- –û—Å—Ç–∞–≤–ª—è—Ç—å –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π CallbackQueryHandler

### ‚úÖ –ß—Ç–æ –ø–ª–∞–Ω–∏—Ä—É–µ–º:
- **–ü–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è** –Ω–∞ –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É
- **–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫** - ButtonFactory
- **–¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥** - ParsedCallbackData
- **–†–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏** - ICallbackActionHandler
- **–ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** –±–µ–∑ legacy

## üìã –ü–æ—ç—Ç–∞–ø–Ω—ã–π –ø–ª–∞–Ω –∏–∑–±–∞–≤–ª–µ–Ω–∏—è –æ—Ç legacy

### –≠—Ç–∞–ø 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–ü–†–ò–û–†–ò–¢–ï–¢ #1)
**–¶–µ–ª—å:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–µ –∫–Ω–æ–ø–∫–∏
**Legacy:** –û—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å, —Ç–æ–ª—å–∫–æ –∏—Å–ø—Ä–∞–≤–ª—è–µ–º –±–∞–≥–∏
**–í—Ä–µ–º—è:** 1-2 –¥–Ω—è

### –≠—Ç–∞–ø 2: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å–æ —Å—Ç–∞—Ä–æ–π
**Legacy:** –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
**–ù–æ–≤–æ–µ:** 
- `Callback/` –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
- `ParsedCallbackData` —Å `TryParse()`
- `ButtonFactory`
- `NotificationFormatters`
**–í—Ä–µ–º—è:** 3-5 –¥–Ω–µ–π

### –≠—Ç–∞–ø 3: –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫
**–¶–µ–ª—å:** –ó–∞–º–µ–Ω–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –Ω–∞ ButtonFactory
**Legacy:** –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –∑–∞–º–µ–Ω—è–µ—Ç—Å—è
**–ù–æ–≤–æ–µ:** –í—Å–µ –Ω–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏ —á–µ—Ä–µ–∑ ButtonFactory
**–í—Ä–µ–º—è:** 2-3 –¥–Ω—è

### –≠—Ç–∞–ø 4: –ú–∏–≥—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ callback
**–¶–µ–ª—å:** –ó–∞–º–µ–Ω–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –≤ CallbackQueryHandler
**Legacy:** –°—Ç–∞—Ä—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ ParsedCallbackData
**–ù–æ–≤–æ–µ:** –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
**–í—Ä–µ–º—è:** 2-3 –¥–Ω—è

### –≠—Ç–∞–ø 5: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
**–¶–µ–ª—å:** –†–∞–∑–±–∏—Ç—å CallbackQueryHandler –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
**Legacy:** CallbackQueryHandler —É–ø—Ä–æ—â–∞–µ—Ç—Å—è –∏–ª–∏ —É–¥–∞–ª—è–µ—Ç—Å—è
**–ù–æ–≤–æ–µ:** ICallbackActionHandler implementations
**–í—Ä–µ–º—è:** 3-5 –¥–Ω–µ–π

### –≠—Ç–∞–ø 6: –û—á–∏—Å—Ç–∫–∞ legacy –∫–æ–¥–∞
**–¶–µ–ª—å:** –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Å—Ç–∞—Ä—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –∏ –º–µ—Ç–æ–¥—ã
**Legacy:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—è–µ—Ç—Å—è
**–ù–æ–≤–æ–µ:** –¢–æ–ª—å–∫–æ –Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
**–í—Ä–µ–º—è:** 1-2 –¥–Ω—è

## üîÑ –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏

### –®–∞–≥ 1: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ (–≠—Ç–∞–ø—ã 2-4)
```csharp
// –°—Ç–∞—Ä—ã–π –∫–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
private async Task HandleAdminCallback(CallbackQuery callbackQuery, CancellationToken cancellationToken)
{
    var cbData = callbackQuery.Data!;
    var split = cbData.Split('_').ToList();
    
    // –°—Ç–∞—Ä—ã–π –ø–∞—Ä—Å–∏–Ω–≥
    if (split.Count > 2 && split[0] == "ban" && long.TryParse(split[1], out var chatId))
    {
        await HandleBanUser(callbackQuery, chatId, userId, cancellationToken);
    }
    
    // –ù–û–í–û–ï: –ü—Ä–æ–±—É–µ–º –Ω–æ–≤—ã–π –ø–∞—Ä—Å–∏–Ω–≥
    if (ParsedCallbackData.TryParse(cbData, out var parsedData, out var error))
    {
        await HandleParsedCallback(parsedData, callbackQuery, cancellationToken);
    }
    else
    {
        // Fallback –Ω–∞ —Å—Ç–∞—Ä—ã–π –ø–∞—Ä—Å–∏–Ω–≥
        _logger.LogWarning("–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å callback data: {Error}, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ä—ã–π –ø–∞—Ä—Å–∏–Ω–≥", error);
    }
}
```

### –®–∞–≥ 2: –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –∑–∞–º–µ–Ω–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫
```csharp
// –°—Ç–∞—Ä—ã–π –∫–æ–¥ –≤ MessageHandler.cs
var keyboard = new InlineKeyboardMarkup(new[]
{
    new[]
    {
        new InlineKeyboardButton("ü§ñ –±–∞–Ω") { CallbackData = callbackDataBan },
        new InlineKeyboardButton("üò∂ –ø—Ä–æ–ø—É—Å–∫") { CallbackData = "noop" },
        new InlineKeyboardButton("ü•∞ —Å–≤–æ–π") { CallbackData = $"approve_{user.Id}" }
    }
});

// –ù–û–í–´–ô –∫–æ–¥
var keyboard = _buttonFactory.CreateAdminActionButtons(user.Id, message.Chat.Id, BanContext.Default);
```

### –®–∞–≥ 3: –ú–∏–≥—Ä–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤ callback data
```csharp
// –°—Ç–∞—Ä—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã (–ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –∑–∞–º–µ–Ω—è—é—Ç—Å—è)
"ban_123_456"
"approve_123"
"suspicious_ban_123_456_789"

// –ù–æ–≤—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã (—Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ)
"ban_123_456_default"
"approve_123"
"suspicious_ban_123_456_789"
```

### –®–∞–≥ 4: –£–¥–∞–ª–µ–Ω–∏–µ legacy –∫–æ–¥–∞
```csharp
// –£–î–ê–õ–Ø–ï–ú —Å—Ç–∞—Ä—ã–π –ø–∞—Ä—Å–∏–Ω–≥
private async Task HandleAdminCallback(CallbackQuery callbackQuery, CancellationToken cancellationToken)
{
    var cbData = callbackQuery.Data!;
    
    // –¢–û–õ–¨–ö–û –Ω–æ–≤—ã–π –ø–∞—Ä—Å–∏–Ω–≥
    if (ParsedCallbackData.TryParse(cbData, out var parsedData, out var error))
    {
        await HandleParsedCallback(parsedData, callbackQuery, cancellationToken);
    }
    else
    {
        _logger.LogError("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç callback data: {Data}, –æ—à–∏–±–∫–∞: {Error}", cbData, error);
        await _bot.AnswerCallbackQuery(callbackQuery.Id, "–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏", cancellationToken: cancellationToken);
    }
}
```

## üß™ –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏

### 1. –¢–µ—Å—Ç—ã —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
```csharp
[Test]
public async Task LegacyCallbackData_ShouldStillWork()
{
    // Arrange
    var legacyCallbackData = "ban_123_456";
    var callbackQuery = CreateCallbackQuery(legacyCallbackData);
    
    // Act
    await _handler.HandleAsync(callbackQuery);
    
    // Assert
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –≤—ã–ø–æ–ª–Ω–∏–ª–æ—Å—å
}

[Test]
public async Task NewCallbackData_ShouldWork()
{
    // Arrange
    var newCallbackData = "ban_123_456_default";
    var callbackQuery = CreateCallbackQuery(newCallbackData);
    
    // Act
    await _handler.HandleAsync(callbackQuery);
    
    // Assert
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –≤—ã–ø–æ–ª–Ω–∏–ª–æ—Å—å
}
```

### 2. Snapshot-—Ç–µ—Å—Ç—ã –¥–ª—è –∫–Ω–æ–ø–æ–∫
```csharp
[Test]
public void ButtonFactory_CreateAdminActionButtons_ShouldMatchSnapshot()
{
    // Arrange
    var userId = 123L;
    var chatId = 456L;
    var context = BanContext.Default;
    
    // Act
    var keyboard = _buttonFactory.CreateAdminActionButtons(userId, chatId, context);
    
    // Assert
    Assert.That(keyboard.InlineKeyboard, Is.EqualTo(ExpectedKeyboardSnapshot));
}
```

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
```csharp
[Test]
public async Task EndToEnd_ButtonCreationAndHandling_ShouldWork()
{
    // Arrange
    var user = CreateTestUser();
    var chat = CreateTestChat();
    
    // Act - —Å–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É
    var keyboard = _buttonFactory.CreateAdminActionButtons(user.Id, chat.Id, BanContext.Default);
    var callbackData = keyboard.InlineKeyboard[0][0].CallbackData;
    
    // Act - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º callback
    var callbackQuery = CreateCallbackQuery(callbackData);
    await _handler.HandleAsync(callbackQuery);
    
    // Assert
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –≤—ã–ø–æ–ª–Ω–∏–ª–æ—Å—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
}
```

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—à–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
- [ ] **100% –∫–Ω–æ–ø–æ–∫** —Å–æ–∑–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ ButtonFactory
- [ ] **100% callback data** –ø–∞—Ä—Å–∏—Ç—Å—è —á–µ—Ä–µ–∑ ParsedCallbackData
- [ ] **0 legacy —Ñ–æ—Ä–º–∞—Ç–æ–≤** –æ—Å—Ç–∞—é—Ç—Å—è –≤ –∫–æ–¥–µ
- [ ] **515 —Ç–µ—Å—Ç–æ–≤** –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ
- [ ] **0 —Ä–µ–≥—Ä–µ—Å—Å–∏–π** –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
- [ ] **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞** —É–ª—É—á—à–∏–ª–∞—Å—å
- [ ] **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** –ø–æ–≤—ã—Å–∏–ª–∞—Å—å
- [ ] **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** —Å—Ç–∞–ª–∞ –ø—Ä–æ—â–µ
- [ ] **–ü–æ–¥–¥–µ—Ä–∂–∫–∞** —É–ø—Ä–æ—Å—Ç–∏–ª–∞—Å—å

## üö® –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### –†–∏—Å–∫ 1: –†–µ–≥—Ä–µ—Å—Å–∏–∏ –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** 
- –ü–æ—ç—Ç–∞–ø–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
- –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–∞—Ç–∞ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ

### –†–∏—Å–∫ 2: –ù–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–µ –∫–Ω–æ–ø–∫–∏ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å—Ç–∞—Ä–æ–π –∏ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
- Fallback –Ω–∞ —Å—Ç–∞—Ä—ã–π –ø–∞—Ä—Å–∏–Ω–≥
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†–∏—Å–∫ 3: –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–Ω–∏–º–∞–Ω–∏—è –¥–ª—è –∫–æ–º–∞–Ω–¥—ã
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ
- –û–±—É—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã

## üìÖ –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏

### –û–±—â–µ–µ –≤—Ä–µ–º—è: 12-20 –¥–Ω–µ–π
- **–≠—Ç–∞–ø 1:** 1-2 –¥–Ω—è (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
- **–≠—Ç–∞–ø 2:** 3-5 –¥–Ω–µ–π (–Ω–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- **–≠—Ç–∞–ø 3:** 2-3 –¥–Ω—è (–º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫)
- **–≠—Ç–∞–ø 4:** 2-3 –¥–Ω—è (–º–∏–≥—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏)
- **–≠—Ç–∞–ø 5:** 3-5 –¥–Ω–µ–π (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)
- **–≠—Ç–∞–ø 6:** 1-2 –¥–Ω—è (–æ—á–∏—Å—Ç–∫–∞ legacy)

## üéØ –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —É –Ω–∞—Å –±—É–¥–µ—Ç:
```
ClubDoorman/
‚îú‚îÄ‚îÄ Callback/
‚îÇ   ‚îú‚îÄ‚îÄ Models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ParsedCallbackData.cs ‚úÖ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CallbackActionType.cs ‚úÖ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ BanContext.cs ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ Interfaces/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ICallbackActionHandler.cs ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ Handlers/
‚îÇ       ‚îú‚îÄ‚îÄ BanActionHandler.cs ‚úÖ
‚îÇ       ‚îú‚îÄ‚îÄ ApproveActionHandler.cs ‚úÖ
‚îÇ       ‚îî‚îÄ‚îÄ SuspiciousActionHandler.cs ‚úÖ
‚îú‚îÄ‚îÄ Services/
‚îÇ   ‚îú‚îÄ‚îÄ ButtonFactory/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ IButtonFactory.cs ‚úÖ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ButtonFactory.cs ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ NotificationFormatters/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ INotificationFormatter.cs ‚úÖ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ ServiceChatDispatcher.cs ‚úÖ (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π)
‚îî‚îÄ‚îÄ docs/
    ‚îî‚îÄ‚îÄ buttons.md ‚úÖ
```

### ‚ùå –ß—Ç–æ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ:
- –°—Ç–∞—Ä—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã callback data
- –†—É—á–Ω–æ–π –ø–∞—Ä—Å–∏–Ω–≥ –≤ CallbackQueryHandler
- –†–∞–∑–±—Ä–æ—Å–∞–Ω–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
- –ú–æ–Ω–æ–ª–∏—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

## üí° –í—ã–≤–æ–¥

**–î–∞, –º—ã –ù–ï –ø–ª–∞–Ω–∏—Ä—É–µ–º –æ—Å—Ç–∞–≤–ª—è—Ç—å legacy!** 

–°—Ç—Ä–∞—Ç–µ–≥–∏—è: **–ø–æ—ç—Ç–∞–ø–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Å –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–æ–π** –≤ –∫–æ–Ω—Ü–µ.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–¥–Ω–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è, —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è, —Ç–µ—Å—Ç–∏—Ä—É–µ–º–∞—è —Å–∏—Å—Ç–µ–º–∞ –±–µ–∑ legacy –∫–æ–¥–∞. 