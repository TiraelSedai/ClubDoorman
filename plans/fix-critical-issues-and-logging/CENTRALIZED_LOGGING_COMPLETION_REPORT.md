# üéâ –û—Ç—á–µ—Ç –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è ClubDoorman

## üìã –û–±–∑–æ—Ä –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã

–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è ClubDoorman **—É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞**. –í—Å–µ —Ö–∞—Ä–¥–∫–æ–¥—ã —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–º–∏ —à–∞–±–ª–æ–Ω–∞–º–∏.

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚úÖ
- **IMessageService** –∏ **MessageService** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **MessageTemplates** - —Å–∏—Å—Ç–µ–º–∞ —à–∞–±–ª–æ–Ω–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π
- **NotificationData** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **AdminNotificationType**, **LogNotificationType**, **UserNotificationType** - —Ç–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### 2. –§–∞–π–ª–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ‚úÖ
- –ù–∞—Å—Ç—Ä–æ–µ–Ω Serilog —Å —Ä–æ—Ç–∞—Ü–∏–µ–π –ª–æ–≥–æ–≤
- –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ª–æ–≥–æ–≤ –∏ –æ—à–∏–±–æ–∫
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏

### 3. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–¥–∞ ‚úÖ
- **MessageHandler.cs** - –≤—Å–µ —Ö–∞—Ä–¥–∫–æ–¥—ã –∑–∞–º–µ–Ω–µ–Ω—ã
- **Worker.cs** - –≤—Å–µ —Ö–∞—Ä–¥–∫–æ–¥—ã –∑–∞–º–µ–Ω–µ–Ω—ã  
- **ModerationService.cs** - –≤—Å–µ —Ö–∞—Ä–¥–∫–æ–¥—ã –∑–∞–º–µ–Ω–µ–Ω—ã
- **IntroFlowService.cs** - –≤—Å–µ —Ö–∞—Ä–¥–∫–æ–¥—ã –∑–∞–º–µ–Ω–µ–Ω—ã
- **CallbackQueryHandler.cs** - –≤—Å–µ —Ö–∞—Ä–¥–∫–æ–¥—ã –∑–∞–º–µ–Ω–µ–Ω—ã
- **ChatMemberHandler.cs** - –≤—Å–µ —Ö–∞—Ä–¥–∫–æ–¥—ã –∑–∞–º–µ–Ω–µ–Ω—ã

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ DI ‚úÖ
- –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- –ü—Ä–æ–µ–∫—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ (501 —Ç–µ—Å—Ç, 0 —Å–±–æ–µ–≤)

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
```
AdminNotificationType (24 —Ç–∏–ø–∞)
‚îú‚îÄ‚îÄ AutoBan, AutoBanBlacklist, AutoBanFromBlacklist
‚îú‚îÄ‚îÄ BanForLongName, BanChannel, ChannelMessage
‚îú‚îÄ‚îÄ SuspiciousUser, SuspiciousMessage
‚îú‚îÄ‚îÄ AiProfileAnalysis, AiDetectAutoDelete, AiDetectSuspicious
‚îú‚îÄ‚îÄ UserCleanup, UserApproved, UserRemovedFromApproved
‚îú‚îÄ‚îÄ SystemError, ModerationError, ChannelError
‚îî‚îÄ‚îÄ –∏ –¥—Ä—É–≥–∏–µ...

LogNotificationType (8 —Ç–∏–ø–æ–≤)
‚îú‚îÄ‚îÄ AutoBanBlacklist, AutoBanFromBlacklist
‚îú‚îÄ‚îÄ BanForLongName, BanChannel
‚îú‚îÄ‚îÄ SuspiciousUser, AiProfileAnalysis
‚îú‚îÄ‚îÄ CriticalError, ChannelMessage

UserNotificationType (11 —Ç–∏–ø–æ–≤)
‚îú‚îÄ‚îÄ ModerationWarning, MessageDeleted
‚îú‚îÄ‚îÄ UserBanned, UserRestricted
‚îú‚îÄ‚îÄ CaptchaShown, CaptchaWelcome
‚îú‚îÄ‚îÄ Welcome, Warning, Success, SystemInfo
```

### –®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π
- –í—Å–µ —à–∞–±–ª–æ–Ω—ã —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ `MessageTemplates.cs`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Markdown –∏ HTML —Ä–∞–∑–º–µ—Ç–∫–∏
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –§–∞–π–ª–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```
logs/
‚îú‚îÄ‚îÄ clubdoorman-2024-01-21.log (—Ä–æ—Ç–∞—Ü–∏—è 7 –¥–Ω–µ–π)
‚îú‚îÄ‚îÄ errors-2024-01-21.log (—Ä–æ—Ç–∞—Ü–∏—è 30 –¥–Ω–µ–π)
‚îî‚îÄ‚îÄ .gitkeep
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
```csharp
// –•–∞—Ä–¥–∫–æ–¥—ã —Ä–∞–∑–±—Ä–æ—Å–∞–Ω—ã –ø–æ –≤—Å–µ–º—É –∫–æ–¥—É
await _bot.SendMessage(Config.AdminChatId, 
    $"üö´ –ê–≤—Ç–æ–±–∞–Ω: {reason}...", cancellationToken);
```

### –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
```csharp
// –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
await _messageService.SendAdminNotificationAsync(
    AdminNotificationType.AutoBan, 
    new AutoBanNotificationData(user, chat, "–ê–≤—Ç–æ-–±–∞–Ω", reason), 
    cancellationToken
);
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- **501 —Ç–µ—Å—Ç** –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ
- **0 —Å–±–æ–µ–≤** –≤ —Ç–µ—Å—Ç–∞—Ö
- –ü—Ä–æ–µ–∫—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- –í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ

### 1. –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞
- –£–±—Ä–∞–Ω—ã —Ö–∞—Ä–¥–∫–æ–¥—ã —Å–æ–æ–±—â–µ–Ω–∏–π
- –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π —Å—Ç–∏–ª—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è

### 2. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –í—Å–µ —à–∞–±–ª–æ–Ω—ã –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- –õ–µ–≥–∫–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ –±—É–¥—É—â–µ–º

### 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- JSON —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤
- –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –æ—à–∏–±–æ–∫

### 4. –£–ª—É—á—à–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- –õ–µ–≥–∫–∏–π —Ç—Ä–µ–∫–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ:

1. **–ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - –î–æ–±–∞–≤–∏—Ç—å Prometheus –º–µ—Ç—Ä–∏–∫–∏
   - –°–æ–∑–¥–∞—Ç—å Grafana –¥–∞—à–±–æ—Ä–¥
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã

2. **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —è–∑—ã–∫–æ–≤
   - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤

3. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**
   - Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - Webhook –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è ClubDoorman **—É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞**. –°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–¥–∏–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏ —à–∞–±–ª–æ–Ω–∞–º–∏, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞, —É–ø—Ä–æ—â–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.

**–°—Ç–∞—Ç—É—Å: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û** 