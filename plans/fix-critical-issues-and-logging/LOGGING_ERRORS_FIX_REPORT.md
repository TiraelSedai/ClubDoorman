# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

## –°—Ç–∞—Ç—É—Å: –í –ü–†–û–¶–ï–°–°–ï

### –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (21.07.2025)

#### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –≤ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö

**–ü—Ä–æ–±–ª–µ–º–∞**: –í –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –∫–Ω–æ–ø–∫–∏, —Ö–æ—Ç—è –≤ AI –∞–Ω–∞–ª–∏–∑–µ –ø—Ä–æ—Ñ–∏–ª—è –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö –º–µ—Ç–æ–¥–æ–≤ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ–∫–∞–∑–∞–ª–æ —Ä–∞–∑–Ω–∏—Ü—É –≤ `ParseMode`:
- `SendAiProfileAnalysisAsync` - –Ω–µ —É–∫–∞–∑–∞–Ω `parseMode` (—Ä–∞–±–æ—Ç–∞–µ—Ç)
- `SendSuspiciousMessageWithButtons` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è `ParseMode.MarkdownV2` (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

**–†–µ—à–µ–Ω–∏–µ**: –ò–∑–º–µ–Ω–µ–Ω `ParseMode.MarkdownV2` –Ω–∞ `ParseMode.Markdown` –≤ `SendSuspiciousMessageWithButtons`

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: 
- ‚úÖ –ö–Ω–æ–ø–∫–∏ –≤ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å
- ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –æ—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ Markdown
- ‚úÖ Fallback –±–æ–ª—å—à–µ –Ω–µ –¥–æ–ª–∂–µ–Ω —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å

#### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ—Å—ã–ª–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

**–ü—Ä–æ–±–ª–µ–º–∞**: –í `DeleteAndReportMessage` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ –¥–≤–æ–π–Ω–∞—è –ø–µ—Ä–µ—Å—ã–ª–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è:
1. –ü–µ—Ä–≤–∞—è –ø–µ—Ä–µ—Å—ã–ª–∫–∞ —á–µ—Ä–µ–∑ `_bot.ForwardMessage`
2. –í—Ç–æ—Ä–∞—è –ø–µ—Ä–µ—Å—ã–ª–∫–∞ —á–µ—Ä–µ–∑ `_messageService.ForwardToAdminWithNotificationAsync`

**–†–µ—à–µ–Ω–∏–µ**:
- –£–±—Ä–∞–Ω–∞ –ø–µ—Ä–≤–∞—è –ø–µ—Ä–µ—Å—ã–ª–∫–∞ —á–µ—Ä–µ–∑ `_bot.ForwardMessage`
- –û—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ—Å—ã–ª–∫–∞ —á–µ—Ä–µ–∑ `_messageService.ForwardToAdminWithNotificationAsync`
- –î–æ–±–∞–≤–ª–µ–Ω fallback –Ω–∞ `SendAdminNotificationAsync` –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: 
- ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ—Å—ã–ª–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –ø–µ—Ä–µ—Å—ã–ª–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å fallback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

#### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å Markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –º–æ–≥–ª–∏ –≤—ã–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ Markdown –∏–∑-–∑–∞ –Ω–µ—ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≤ —Ç–µ–∫—Å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è.

**–†–µ—à–µ–Ω–∏–µ**:
1. **–î–æ–±–∞–≤–ª–µ–Ω—ã –æ–±—Ä–∞—Ç–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏** –≤ —à–∞–±–ª–æ–Ω –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è:
   - –ò–∑–º–µ–Ω–µ–Ω–æ: `"–°–æ–æ–±—â–µ–Ω–∏–µ: {MessageText}"`
   - –ù–∞: `"–°–æ–æ–±—â–µ–Ω–∏–µ: `{MessageText}`"`

2. **–î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `EscapeMarkdown`** –≤ `MessageTemplates.cs`:
   - –≠–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç –≤—Å–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã Markdown: `_`, `*`, `[`, `]`, `(`, `)`, `~`, `` ` ``, `>`, `#`, `+`, `-`, `=`, `|`, `{`, `}`, `.`, `!`
   - –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ `{MessageText}` –≤ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: 
- ‚úÖ –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä—É—é—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
- ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –æ—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ Markdown
- ‚úÖ –ö–Ω–æ–ø–∫–∏ –≤ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

#### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º —à–∞–±–ª–æ–Ω–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞**: –í —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:
- `{SpamProbability:F2}` –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
- `{AiReason}` –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–π –ø—Ä–∏—á–∏–Ω—ã
- `{UserFullName}` –Ω–µ –∑–∞–º–µ–Ω—è–ª—Å—è –≤ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö

**–†–µ—à–µ–Ω–∏–µ**:
1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω `AiProfileAnalysisData`** –≤ `MessageTemplates.cs`:
   - –ó–∞–º–µ–Ω—è–µ–º `{SpamProbability:F2}` –Ω–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å 2 –∑–Ω–∞–∫–∞–º–∏ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π
   - –ó–∞–º–µ–Ω—è–µ–º `{AiReason}` –Ω–∞ `aiProfileData.Reason`

2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω `SuspiciousMessageNotificationData`** –≤ `MessageTemplates.cs`:
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–∞–∑–æ–≤—ã—Ö –ø–æ–ª–µ–π: `{UserFullName}`, `{UserName}`, `{UserId}`, `{ChatTitle}`
   - –¢–µ–ø–µ—Ä—å –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –¥—Ä—É–≥–∏–µ –¥–∞–Ω–Ω—ã–µ

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: 
- ‚úÖ AI –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ—Ñ–∏–ª—è —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ —Å–ø–∞–º–∞ –∏ –ø—Ä–∏—á–∏–Ω—ã
- ‚úÖ –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ö–Ω–æ–ø–∫–∏ –≤ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å (–µ—Å–ª–∏ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –≤ `SendSuspiciousMessageWithButtons`)

### –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–Ω–æ–ø–∫–∞–º–∏

#### üîç –°—Ç–∞—Ç—É—Å –∫–Ω–æ–ø–æ–∫ –≤ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
1. ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ callback'–æ–≤ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç** - `CallbackQueryHandler.HandleSuspiciousUserCallback`
2. ‚úÖ **–ö–Ω–æ–ø–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** - –≤ `SendSuspiciousMessageWithButtons`
3. ‚úÖ **Callback data —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ** - `suspicious_approve_{userId}_{chatId}`, `suspicious_ban_{userId}_{chatId}`, `suspicious_ai_{userId}_{chatId}`

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∫–Ω–æ–ø–æ–∫**:
1. **–û—à–∏–±–∫–∞ –≤ `SendSuspiciousMessageWithButtons`** ‚Üí —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç fallback –±–µ–∑ –∫–Ω–æ–ø–æ–∫
2. **–ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –±–æ—Ç–∞** –≤ –∞–¥–º–∏–Ω-—á–∞—Ç–µ (–Ω–µ –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å inline –∫–Ω–æ–ø–∫–∏)
3. **–û—à–∏–±–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Markdown** ‚Üí —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

**–í—ã–≤–æ–¥**: –ö–Ω–æ–ø–∫–∏ –±—ã–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –µ—â–µ –¥–æ –Ω–∞—à–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π. –ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤:
- **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º ParseMode** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è `ParseMode.MarkdownV2` –≤–º–µ—Å—Ç–æ `ParseMode.Markdown`
- –≠—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ –æ—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ Markdown –∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ fallback –±–µ–∑ –∫–Ω–æ–ø–æ–∫

**–ò–°–ü–†–ê–í–õ–ï–ù–û**: –ò–∑–º–µ–Ω–µ–Ω `ParseMode.MarkdownV2` –Ω–∞ `ParseMode.Markdown` –≤ `SendSuspiciousMessageWithButtons`

### –¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

#### üîç –ü—Ä–æ–±–ª–µ–º–∞ —Å "chat not found" –¥–ª—è –∞–¥–º–∏–Ω –∏ –ª–æ–≥ —á–∞—Ç–æ–≤

**–°—Ç–∞—Ç—É—Å**: –¢—Ä–µ–±—É–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∞–µ—Ç –æ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö "chat not found" –¥–ª—è –∞–¥–º–∏–Ω –∏ –ª–æ–≥ —á–∞—Ç–æ–≤, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ —ç—Ç–∏ —á–∞—Ç—ã –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã.

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã**:
1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ ID —á–∞—Ç–æ–≤ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –±–æ—Ç–∞ –≤ —á–∞—Ç–∞—Ö
3. –ë–æ—Ç –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–º —á–∞—Ç–æ–≤

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏**:
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å ID —á–∞—Ç–æ–≤ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∞–¥–º–∏–Ω –∏ –ª–æ–≥ —á–∞—Ç—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –±–æ—Ç–∞ –≤ —ç—Ç–∏—Ö —á–∞—Ç–∞—Ö

### –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

#### ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ**:
1. **–°–æ–∑–¥–∞–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è** (`LoggingConfiguration.cs`):
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ñ–∞–π–ª–æ–≤—ã—Ö –ª–æ–≥–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
   - –ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `appsettings.json`

2. **–û–±–Ω–æ–≤–ª–µ–Ω `Program.cs`**:
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ñ–∞–π–ª–æ–≤—ã–µ –ª–æ–≥-—Å–∏—Å—Ç–µ–º—ã: `system-.log`, `userflow-.log`
   - –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –Ω–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã

3. **–ó–∞–º–µ–Ω–µ–Ω—ã —Ö–∞—Ä–¥–∫–æ–¥–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –≤ `MessageHandler.cs`:
   - `HandleBlacklistBan` ‚Üí `SendLogNotificationAsync`
   - `DontDeleteButReportMessage` ‚Üí `SendSuspiciousMessageWithButtons`
   - `DeleteAndReportMessage` ‚Üí `ForwardToAdminWithNotification`
   - `AutoBanChannel` ‚Üí `ForwardToAdminWithNotification`
   - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ‚Üí `SendUserNotificationWithReplyAsync`

4. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π** –≤ `DeleteAndReportMessage`:
   - –ü–µ—Ä–µ—Å—ã–ª–∫–∞ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –î–û —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è
   - –î–æ–±–∞–≤–ª–µ–Ω fallback –Ω–∞ `SendAdminNotificationAsync` –ø—Ä–∏ –æ—à–∏–±–∫–µ –ø–µ—Ä–µ—Å—ã–ª–∫–∏

5. **–î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `SendSuspiciousMessageWithButtons`**:
   - –°–æ–∑–¥–∞–µ—Ç inline –∫–Ω–æ–ø–∫–∏ –¥–ª—è –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
   - Fallback –Ω–∞ –æ–±—ã—á–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

#### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º —à–∞–±–ª–æ–Ω–æ–≤

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ**:
1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω `AiProfileAnalysisData`**:
   - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∑–∞–º–µ–Ω–∞ `{SpamProbability:F2}` –∏ `{AiReason}`
   - –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ —Å–ø–∞–º–∞

2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω `SuspiciousMessageNotificationData`**:
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–∞–∑–æ–≤—ã—Ö –ø–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —á–∞—Ç–∞
   - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å Markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ**:
1. **–î–æ–±–∞–≤–ª–µ–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ Markdown**:
   - –ú–µ—Ç–æ–¥ `EscapeMarkdown` –¥–ª—è —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
   - –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ —Ç–µ–∫—Å—Ç—É —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö

2. **–£–ª—É—á—à–µ–Ω —à–∞–±–ª–æ–Ω –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è**:
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –æ–±—Ä–∞—Ç–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ –¥–ª—è `{MessageText}`
   - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞ Markdown

#### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ—Å—ã–ª–∫–∏

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ**:
1. **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∞ –¥–≤–æ–π–Ω–∞—è –ø–µ—Ä–µ—Å—ã–ª–∫–∞** –≤ `DeleteAndReportMessage`:
   - –£–±—Ä–∞–Ω–∞ –ø–µ—Ä–≤–∞—è –ø–µ—Ä–µ—Å—ã–ª–∫–∞ —á–µ—Ä–µ–∑ `_bot.ForwardMessage`
   - –û—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ—Å—ã–ª–∫–∞ —á–µ—Ä–µ–∑ `_messageService.ForwardToAdminWithNotificationAsync`

2. **–£–ª—É—á—à–µ–Ω fallback –º–µ—Ö–∞–Ω–∏–∑–º**:
   - –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –≤ `ForwardToAdminWithNotificationAsync` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```json
{
  "Logging": {
    "FileLogging": {
      "System": { "Enabled": true, "RetentionDays": 14 },
      "UserFlow": { "Enabled": true, "RetentionDays": 7 },
      "General": { "Enabled": true, "RetentionDays": 7 },
      "Errors": { "Enabled": true, "RetentionDays": 30 }
    },
    "TelegramNotifications": {
      "AdminChat": { "Enabled": true },
      "LogChat": { "Enabled": true }
    }
  }
}
```

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **AdminNotificationType**: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- **LogNotificationType**: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –ª–æ–≥-—á–∞—Ç–∞
- **UserNotificationType**: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º —Å —á–∞—Ç–∞–º–∏**:
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å ID —á–∞—Ç–æ–≤ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ —á–∞—Ç—ã

2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
   - –£–±–µ–¥–∏—Ç—å—Å—è –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫–∏ –≤ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö

3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**:
   - –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
   - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

- `ClubDoorman/Program.cs` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- `ClubDoorman/Handlers/MessageHandler.cs` - –∑–∞–º–µ–Ω–∞ —Ö–∞—Ä–¥–∫–æ–¥–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- `ClubDoorman/Services/MessageTemplates.cs` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ Markdown
- `ClubDoorman/Models/Logging/LoggingConfiguration.cs` - –Ω–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `ClubDoorman/Services/LoggingConfigurationService.cs` - –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å
- `ClubDoorman/Services/MessageService.cs` - —É–ª—É—á—à–µ–Ω–∏—è –≤ –æ—Ç–ø—Ä–∞–≤–∫–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π 